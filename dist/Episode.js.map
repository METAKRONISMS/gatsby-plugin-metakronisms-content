{"version":3,"sources":["webpack://[name]/webpack/universalModuleDefinition","webpack://[name]/webpack/bootstrap","webpack://[name]/external \"react\"","webpack://[name]/external \"react-jss\"","webpack://[name]/external \"core-js/modules/es.array.filter\"","webpack://[name]/external \"core-js/modules/es.symbol\"","webpack://[name]/external \"core-js/modules/es.array.for-each\"","webpack://[name]/external \"core-js/modules/es.object.keys\"","webpack://[name]/external \"core-js/modules/web.dom-collections.for-each\"","webpack://[name]/external \"core-js/modules/es.array.join\"","webpack://[name]/external \"core-js/modules/es.object.get-own-property-descriptor\"","webpack://[name]/external \"core-js/modules/es.object.get-own-property-descriptors\"","webpack://[name]/./src/components/Episode/Context.jsx","webpack://[name]/./src/components/Progress/Progress.jsx","webpack://[name]/external \"d3\"","webpack://[name]/./src/components/Button/Button.jsx","webpack://[name]/./src/components/Button/index.js","webpack://[name]/external \"core-js/modules/es.function.name\"","webpack://[name]/external \"core-js/modules/es.symbol.description\"","webpack://[name]/external \"core-js/modules/es.symbol.iterator\"","webpack://[name]/external \"core-js/modules/es.array.from\"","webpack://[name]/external \"core-js/modules/es.array.iterator\"","webpack://[name]/external \"core-js/modules/es.array.slice\"","webpack://[name]/external \"core-js/modules/es.object.to-string\"","webpack://[name]/external \"core-js/modules/es.regexp.to-string\"","webpack://[name]/external \"core-js/modules/es.string.iterator\"","webpack://[name]/external \"core-js/modules/web.dom-collections.iterator\"","webpack://[name]/external \"core-js/modules/es.array.concat\"","webpack://[name]/external \"core-js/modules/es.array.index-of\"","webpack://[name]/./src/components/Slides/Context.jsx","webpack://[name]/./src/components/Slides/ControlButton.jsx","webpack://[name]/./src/components/Slides/Controls.jsx","webpack://[name]/./src/hooks/useBodyBackground.js","webpack://[name]/./src/components/Slides/Slides.jsx","webpack://[name]/./src/components/Slides/Slide.jsx","webpack://[name]/external \"prop-types\"","webpack://[name]/external \"core-js/modules/es.array.map\"","webpack://[name]/external \"core-js/modules/web.timers\"","webpack://[name]/external \"@mdx-js/react\"","webpack://[name]/external \"gatsby-plugin-mdx\"","webpack://[name]/external \"core-js/modules/es.array.reduce\"","webpack://[name]/external \"core-js/modules/es.array.includes\"","webpack://[name]/external \"core-js/modules/es.object.get-prototype-of\"","webpack://[name]/external \"core-js/modules/es.object.set-prototype-of\"","webpack://[name]/external \"core-js/modules/es.object.values\"","webpack://[name]/external \"core-js/modules/es.reflect.construct\"","webpack://[name]/external \"core-js/modules/es.string.includes\"","webpack://[name]/./src/hooks/useApp.js","webpack://[name]/./src/components/Episode/History.jsx","webpack://[name]/./src/components/Episode/Graph.jsx","webpack://[name]/./src/components/Episode/Choices.jsx","webpack://[name]/./src/components/Episode/Episode.jsx"],"names":["root","factory","exports","module","define","amd","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","require","noop","defaultEpisode","title","assets","steps","episodeSteps","currentStep","stepProgress","showChoices","EpisodeContext","createContext","getStepInfo","makeStep","setStepProgress","useEpisode","useContext","withEpisode","Comp","props","Consumer","ctx","useStyles","createUseStyles","theme","border","padding","flexGrow","bar","min","max","height","minHeight","backgroundColor","width","Math","Progress","className","baseClasses","classes","useTheme","filter","Boolean","join","defaultProps","hidden","disabled","color","returned","mixins","button","opacity","cursor","pointerEvents","palette","textDisabled","textContrast","main","Button","children","anim","type","SlidesContext","prevSlide","nextSlide","currentSlide","slidesCount","defaultDuration","useSlides","withSlides","ControlButton","prev","onClick","PrevButton","NextButton","defaultComponents","display","justifyContent","alignItems","buttonWrapper","progress","minWidth","marginLeft","marginRight","flexDirection","Controls","components","ProgressComp","PrevButtonComp","NextButtonComp","useBodyBackground","url","useEffect","bdy","document","body","classList","add","style","backgroundImage","remove","Slides","background","episodeContext","ini","length","React","useState","setCurrentSlide","proxy","useCallback","val","now","showSlide","window","Provider","slidesWrapper","WithEpisode","Slide","duration","showTimeout","classNames","firstDraw","Date","interval","setInterval","clearInterval","progressWrapper","progressBar","defaultState","seasonNr","episodeNr","audioMuted","audioVolume","init","reducer","state","action","payload","Error","useApp","opts","fn","initialState","useReducer","proxiedDispatch","dispatch","proxyDispatch","setSeason","nr","setEpisode","id","toggleAudio","setAudioVolume","History","map","stepId","stepIdx","step","maxWidth","maxHeight","GraphBase","el","onItemMouseEnter","onItemMouseOut","onItemClick","data","links","nodes","clientWidth","clientHeight","simulation","d3","force","svg","attr","link","append","selectAll","sqrt","node","on","info","els","dataNode","index","drag","text","source","x","y","target","full","allSteps","keys","forEach","group","prevId","linkKey","choices","includes","end","values","active","alphaTarget","restart","fx","fy","textContent","appendChild","chart","renderChart","prevSteps","prevFull","newSteps","newFull","ref","refEl","Component","Graph","Connected","propTypes","PropTypes","func","Choices","ButtonComp","episode","handleChoice","choice","Array","isArray","data-hidden","Episode","appStuff","pageContext","episodeMdx","HistoryComp","GraphComp","ChoicesComp","mdx","reduce","obj","parent","frontmatter","mdxObject","currentStepName","wanted","asset","base","publicURL","allComponents","readyComponents","displayName","thisProps","mdxWrapper","choicesWrapper","choicesWrapperHidden","episodeInfo","history","graph","args","console"],"mappings":"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","file":"Episode.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Episode\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Episode\"] = factory();\n\telse\n\t\troot[\"Episode\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 37);\n","module.exports = require(\"react\");","module.exports = require(\"react-jss\");","module.exports = require(\"core-js/modules/es.array.filter\");","module.exports = require(\"core-js/modules/es.symbol\");","module.exports = require(\"core-js/modules/es.array.for-each\");","module.exports = require(\"core-js/modules/es.object.keys\");","module.exports = require(\"core-js/modules/web.dom-collections.for-each\");","module.exports = require(\"core-js/modules/es.array.join\");","module.exports = require(\"core-js/modules/es.object.get-own-property-descriptor\");","module.exports = require(\"core-js/modules/es.object.get-own-property-descriptors\");","import React, { useContext, createContext } from 'react';\n\nconst noop = () => { };\n\nexport const defaultEpisode = {\n  title: '',\n  assets: [],\n  steps: [],\n  episodeSteps: {},\n  currentStep: {},\n  stepProgress: 0,\n  showChoices: false,\n};\n\nconst EpisodeContext = createContext({\n  getStepInfo: noop,\n  makeStep: noop,\n  setStepProgress: noop,\n  ...defaultEpisode,\n});\n\nexport default EpisodeContext;\n\nexport const useEpisode = () => useContext(EpisodeContext);\n\nexport const withEpisode = (Comp) => (props) => (\n  <EpisodeContext.Consumer>\n    {(ctx) => (\n      <Comp\n        // eslint-disable-next-line react/jsx-props-no-spreading\n        {...{ ...props, ...ctx }}\n      />\n    )}\n  </EpisodeContext.Consumer>\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { createUseStyles, useTheme } from 'react-jss';\n\n// eslint-disable-next-line\nconst useStyles = createUseStyles((theme) => ({\n  root: {\n    border: '1px solid currentColor',\n    padding: 1,\n    flexGrow: 1,\n  },\n  bar: ({ min, max }) => ({\n    height: '100%',\n    minHeight: '1ch',\n    backgroundColor: 'currentColor',\n    width: `${Math.max(0, Math.min(min / max, 1)) * 100}%`,\n  }),\n}));\n\nconst Progress = ({\n  min,\n  max,\n  className,\n  classes: baseClasses,\n}) => {\n  const theme = useTheme();\n  const classes = {\n    ...useStyles({ theme, min, max }),\n    ...(baseClasses || {}),\n  };\n  return (\n    <div className={[classes.root, className].filter(Boolean).join(' ')}>\n      <div className={classes.bar} />\n    </div>\n  );\n};\n\nProgress.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.objectOf(PropTypes.string),\n  min: PropTypes.number.isRequired,\n  max: PropTypes.number.isRequired,\n};\n\nProgress.defaultProps = {\n  className: null,\n  classes: null,\n};\n\nexport default Progress;\n","module.exports = require(\"d3\");","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { createUseStyles, useTheme } from 'react-jss';\n\nconst useStyles = createUseStyles((theme) => ({\n  root: ({\n    // anim,\n    hidden,\n    disabled,\n    color,\n  }) => {\n    const returned = {\n      ...theme.mixins.button,\n      opacity: hidden ? 0.25 : 1,\n      cursor: disabled ? 'normal' : 'pointer',\n      pointerEvents: disabled || hidden ? 'none' : 'all',\n    };\n    returned.color = disabled\n      ? theme.palette[color].textDisabled\n      : theme.palette[color].textContrast;\n    returned.backgroundColor = disabled\n      ? theme.palette[color].disabled\n      : theme.palette[color].main;\n    return returned;\n  },\n}));\n\nconst Button = ({\n  children,\n  className,\n  hidden,\n  anim,\n  type,\n  classes: baseClasses,\n  ...props\n}) => {\n  const theme = useTheme();\n  const classes = {\n    ...useStyles({\n      ...props,\n      hidden,\n      anim,\n      theme,\n    }),\n    ...(baseClasses || {}),\n  };\n\n  // if the anim,\n\n  return (\n    <button\n      // eslint-disable-next-line react/button-has-type\n      type={type}\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      {...props}\n      className={[\n        classes.root,\n        className,\n        hidden && classes.hidden,\n      ].filter(Boolean).join(' ')}\n    >\n      {children}\n    </button>\n  );\n};\n\nButton.propTypes = {\n  classes: PropTypes.objectOf(PropTypes.string),\n  children: PropTypes.node,\n  type: PropTypes.oneOf(['button', 'reset', 'submit']),\n  anim: PropTypes.oneOf(['in', 'out']),\n  className: PropTypes.string,\n  color: PropTypes.string,\n  disabled: PropTypes.bool,\n  hidden: PropTypes.bool,\n};\n\nButton.defaultProps = {\n  classes: null,\n  type: 'button',\n  children: null,\n  className: null,\n  color: 'primary',\n  disabled: false,\n  anim: null,\n  hidden: false,\n};\n\nexport default Button;\n","export { default } from './Button';\n","module.exports = require(\"core-js/modules/es.function.name\");","module.exports = require(\"core-js/modules/es.symbol.description\");","module.exports = require(\"core-js/modules/es.symbol.iterator\");","module.exports = require(\"core-js/modules/es.array.from\");","module.exports = require(\"core-js/modules/es.array.iterator\");","module.exports = require(\"core-js/modules/es.array.slice\");","module.exports = require(\"core-js/modules/es.object.to-string\");","module.exports = require(\"core-js/modules/es.regexp.to-string\");","module.exports = require(\"core-js/modules/es.string.iterator\");","module.exports = require(\"core-js/modules/web.dom-collections.iterator\");","module.exports = require(\"core-js/modules/es.array.concat\");","module.exports = require(\"core-js/modules/es.array.index-of\");","import React, { useContext, createContext } from 'react';\n\nexport const defaultSlides = {\n  currentSlide: 0,\n  slidesCount: 0,\n  defaultDuration: 0,\n};\n\nconst SlidesContext = createContext({\n  prevSlide: () => { },\n  nextSlide: () => { },\n  ...defaultSlides,\n});\n\nexport default SlidesContext;\n\nexport const useSlides = () => useContext(SlidesContext);\n\nexport const withSlides = (Comp) => (props) => (\n  <SlidesContext.Consumer>\n    {(ctx) => (\n      // eslint-disable-next-line react/jsx-props-no-spreading\n      <Comp {...{ ...props, ...ctx }} />\n    )}\n  </SlidesContext.Consumer>\n);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { useSlides } from './Context';\nimport { useEpisode } from '../Episode/Context';\n\nimport Button from '../Button';\n\nconst ControlButton = ({\n  prev,\n  children,\n  hidden,\n}) => {\n  const {\n    prevSlide,\n    nextSlide,\n    slidesCount,\n    currentSlide,\n  } = useSlides();\n  const {\n    setStepProgress,\n  } = useEpisode();\n\n  const handleClick = () => {\n    if (prev) {\n      prevSlide();\n      setStepProgress((currentSlide - 1) / slidesCount);\n    } else {\n      nextSlide();\n      setStepProgress((currentSlide + 1) / slidesCount);\n    }\n  };\n\n  return <Button hidden={hidden} onClick={handleClick}>{children}</Button>;\n};\n\nControlButton.propTypes = {\n  prev: PropTypes.bool,\n  children: PropTypes.node,\n  hidden: PropTypes.bool,\n};\n\nControlButton.defaultProps = {\n  prev: false,\n  children: null,\n  hidden: false,\n};\n\nexport const PrevButton = ({ hidden }) => (\n  <ControlButton hidden={hidden} prev>\n    Back\n  </ControlButton>\n);\n\nPrevButton.propTypes = {\n  hidden: PropTypes.bool,\n};\n\nPrevButton.defaultProps = {\n  hidden: false,\n};\n\nexport const NextButton = ({ hidden }) => (\n  <ControlButton hidden={hidden}>\n    Continue\n  </ControlButton>\n);\n\nNextButton.propTypes = {\n  hidden: PropTypes.bool,\n};\n\nNextButton.defaultProps = {\n  hidden: false,\n};\n\nexport default ControlButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createUseStyles, useTheme } from 'react-jss';\n\nimport { useSlides } from './Context';\n\nimport { PrevButton, NextButton } from './ControlButton';\nimport Progress from '../Progress/Progress';\n\nexport const defaultComponents = {\n  Progress,\n  PrevButton,\n  NextButton,\n};\n\n// eslint-disable-next-line\nconst useStyles = createUseStyles((theme) => ({\n  root: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'stretch',\n  },\n  buttonWrapper: {},\n  progress: {\n    minWidth: 100,\n    marginLeft: 20,\n    marginRight: 20,\n    display: 'flex',\n    flexDirection: 'column',\n  },\n}));\n\nconst Controls = ({\n  className,\n  components: {\n    Progress: ProgressComp = Progress,\n    PrevButton: PrevButtonComp = PrevButton,\n    NextButton: NextButtonComp = NextButton,\n  } = defaultComponents,\n}) => {\n  const theme = useTheme();\n  const classes = useStyles({ theme });\n  const {\n    slidesCount,\n    currentSlide,\n  } = useSlides();\n\n  return (\n    <div\n      className={[classes.root, className].filter(Boolean).join(' ')}\n    >\n      <div className={classes.buttonWrapper}>\n        <PrevButtonComp hidden={currentSlide < 1 || slidesCount < 2} />\n      </div>\n\n      <div className={classes.progress}>\n        <ProgressComp min={currentSlide} max={slidesCount - 1} />\n      </div>\n\n      <div className={classes.buttonWrapper}>\n        <NextButtonComp hidden={currentSlide >= slidesCount} />\n      </div>\n    </div>\n  );\n};\n\nControls.propTypes = {\n  className: PropTypes.string,\n  components: PropTypes.objectOf(PropTypes.elementType),\n};\n\nControls.defaultProps = {\n  className: null,\n  components: defaultComponents,\n};\n\nexport default Controls;\n","import { useEffect } from 'react';\n\nimport { createUseStyles, useTheme } from 'react-jss';\n\n// eslint-disable-next-line\nconst useStyles = createUseStyles((theme) => ({}));\n\nconst useBodyBackground = (url) => {\n  const theme = useTheme();\n  const classes = useStyles({ theme });\n  useEffect(() => {\n    const bdy = document.body;\n    if (url) {\n      bdy.classList.add(classes.root);\n      bdy.style.backgroundImage = `url(${url})`;\n    }\n    return () => {\n      bdy.classList.remove(classes.root);\n      bdy.style.backgroundImage = null;\n    };\n  }, [classes.root, url]);\n};\n\nexport default useBodyBackground;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createUseStyles, useTheme } from 'react-jss';\nimport SlidesContext from './Context';\nimport SlidesControls from './Controls';\n\nimport useBodyBackground from '../../hooks/useBodyBackground';\n\n// eslint-disable-next-line\nconst useStyles = createUseStyles((theme) => ({}));\n\nconst Slides = ({\n  children,\n  background,\n  defaultDuration,\n  classes: baseClasses,\n  // eslint-disable-next-line react/prop-types\n  episodeContext: { setStepProgress = () => { }, stepProgress = 0 } = {},\n}) => {\n  const ini = Math.min(children.length - 1, stepProgress * children.length);\n  const [currentSlide, setCurrentSlide] = React.useState(ini);\n\n  const proxy = React.useCallback((val) => {\n    const now = val / children.length;\n    if (stepProgress !== now && now <= 1) setStepProgress(now);\n    return val;\n  }, [children.length, stepProgress, setStepProgress]);\n\n  const prevSlide = React.useCallback(() => {\n    setCurrentSlide((prev) => proxy(prev - 1 > -1 ? prev - 1 : prev));\n  }, [proxy]);\n\n  const nextSlide = React.useCallback(() => {\n    // important! `<=` allows to show buttons\n    setCurrentSlide((prev) => proxy(prev <= children.length ? prev + 1 : prev));\n  }, [children.length, proxy]);\n\n  const showSlide = Math.min(currentSlide, children.length - 1);\n\n  const ctx = {\n    slidesCount: children.length,\n    currentSlide,\n    defaultDuration,\n    showSlide,\n    prevSlide,\n    nextSlide,\n  };\n\n  useBodyBackground(background);\n\n  const theme = useTheme();\n  const classes = {\n    ...useStyles({ theme }),\n    ...(baseClasses || {}),\n  };\n\n  if (typeof window === 'undefined') {\n    return null;\n    // return (\n    //   <SlidesContext.Provider value={{ ...ctx }}>\n    //     <div className={classes.root}>\n    //       <div className={classes.slidesWrapper}>\n    //         {children}\n    //       </div>\n    //     </div>\n    //   </SlidesContext.Provider>\n    // );\n  }\n\n  if (!children.length) return '(No Slides)';\n\n  return (\n    <SlidesContext.Provider value={ctx}>\n      <div className={classes.root}>\n        <div className={classes.slidesWrapper}>\n          {children[showSlide]}\n        </div>\n\n        <SlidesControls />\n      </div>\n    </SlidesContext.Provider>\n  );\n};\n\nSlides.propTypes = {\n  classes: PropTypes.objectOf(PropTypes.string),\n  children: PropTypes.oneOfType([\n    PropTypes.arrayOf(PropTypes.node),\n    PropTypes.node,\n  ]).isRequired,\n  background: PropTypes.string,\n  defaultDuration: PropTypes.number,\n  episodeContext: PropTypes.shape({}).isRequired,\n};\n\nSlides.defaultProps = {\n  classes: null,\n  background: null,\n  defaultDuration: null,\n};\n\nexport default Slides;\n\nexport const WithEpisode = Slides;\n// export const WithEpisode = withEpisode(Slides);\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { createUseStyles, useTheme } from 'react-jss';\nimport { useSlides } from './Context';\n\nimport Progress from '../Progress/Progress';\n\nexport const defaultComponents = {\n  Progress,\n};\n\n// eslint-disable-next-line\nconst useStyles = createUseStyles((theme) => ({}), { name: 'Slide' });\n\nconst Slide = ({\n  children,\n  className,\n  duration,\n  showTimeout,\n  classes: baseClasses,\n  components: {\n    Progress: ProgressComp = Progress,\n  } = defaultComponents,\n}) => {\n  const theme = useTheme();\n  const classes = {\n    ...useStyles({ theme }),\n    ...(baseClasses || {}),\n  };\n\n  const classNames = [\n    className,\n    classes.root,\n  ].filter(Boolean).join(' ');\n\n  const { nextSlide } = useSlides();\n  const [firstDraw] = useState(Date.now());\n  useEffect(() => {\n    if (!duration) return () => { };\n    const interval = setInterval(() => {\n      if (firstDraw + duration < Date.now()) {\n        clearInterval(interval);\n        nextSlide();\n      }\n    }, 100);\n    return () => clearInterval(interval);\n  }, [duration, firstDraw, nextSlide]);\n\n  return duration && showTimeout\n    ? (\n      <div className={classNames}>\n        {children}\n        <ProgressComp\n          min={0}\n          max={duration}\n          className={classes.progress}\n          classes={{\n            root: {\n              root: classes.progressWrapper,\n              bar: classes.progressBar,\n            },\n          }}\n        />\n      </div>\n    )\n    : children;\n};\n\nSlide.propTypes = {\n  classes: PropTypes.objectOf(PropTypes.string),\n  className: PropTypes.string,\n  children: PropTypes.node,\n  duration: PropTypes.number,\n  showTimeout: PropTypes.bool,\n  components: PropTypes.objectOf(PropTypes.elementType),\n};\n\nSlide.defaultProps = {\n  classes: null,\n  className: null,\n  children: null,\n  duration: 3000,\n  showTimeout: false,\n  components: defaultComponents,\n};\n\nexport default Slide;\n","module.exports = require(\"prop-types\");","module.exports = require(\"core-js/modules/es.array.map\");","module.exports = require(\"core-js/modules/web.timers\");","module.exports = require(\"@mdx-js/react\");","module.exports = require(\"gatsby-plugin-mdx\");","module.exports = require(\"core-js/modules/es.array.reduce\");","module.exports = require(\"core-js/modules/es.array.includes\");","module.exports = require(\"core-js/modules/es.object.get-prototype-of\");","module.exports = require(\"core-js/modules/es.object.set-prototype-of\");","module.exports = require(\"core-js/modules/es.object.values\");","module.exports = require(\"core-js/modules/es.reflect.construct\");","module.exports = require(\"core-js/modules/es.string.includes\");","/* eslint-disable no-underscore-dangle */\nimport {\n  // useCallback,\n  useReducer,\n} from 'react';\n\nconst defaultState = {\n  stepProgress: 0,\n  seasonNr: 0,\n  episodeNr: 0,\n  steps: [],\n  audioMuted: false,\n  audioVolume: 1,\n};\n\nconst init = () => defaultState;\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'SET_SEASON':\n      return {\n        ...state,\n        seasonNr: action.payload,\n      };\n    case 'SET_EPISODE':\n      return {\n        ...state,\n        episodeNr: action.payload,\n      };\n    case 'SET_STEP_PROGRESS':\n      return {\n        ...state,\n        stepProgress: Math.max(0, Math.min(1, action.payload)),\n      };\n    case 'MAKE_EPISODE_STEP':\n      return {\n        ...state,\n        steps: [...(state.steps || []), action.payload],\n        stepProgress: 0,\n      };\n    case 'TOGGLE_AUDIO':\n      return {\n        ...state,\n        audioMuted: !state.audioMuted,\n      };\n    case 'SET_AUDIO_VOLUME':\n      return {\n        ...state,\n        audioVolume: action.payload,\n      };\n    default:\n      throw new Error(`Invalid action \"${action.type}\"`);\n  }\n};\n\nconst proxyReducer = (fn) => (...args) => {\n  const returned = fn(...args);\n  return returned;\n};\n\nconst proxyDispatch = (dispatch) => (...args) => {\n  const returned = dispatch(...args);\n  return returned;\n};\n\nconst useApp = (opts) => {\n  const {\n    initialState = defaultState,\n  } = opts || {\n    initialState: defaultState,\n  };\n  const [state, dispatch] = useReducer(proxyReducer(reducer), initialState, init);\n  const proxiedDispatch = proxyDispatch(dispatch);\n\n  return {\n    ...state,\n    setStepProgress: (val) => proxiedDispatch({ type: 'SET_STEP_PROGRESS', payload: val }),\n    setSeason: (nr) => proxiedDispatch({ type: 'SET_SEASON', payload: nr }),\n    setEpisode: (nr) => proxiedDispatch({ type: 'SET_EPISODE', payload: nr }),\n    makeStep: (id) => proxiedDispatch({ type: 'MAKE_EPISODE_STEP', payload: id }),\n    toggleAudio: () => proxiedDispatch({ type: 'TOGGLE_AUDIO' }),\n    setAudioVolume: (val) => proxiedDispatch({ type: 'SET_AUDIO_VOLUME', payload: val }),\n  };\n};\n\nexport default useApp;\n\nexport const useAppStuff = () => {\n  const stuff = useApp();\n  // if (typeof window !== 'undefined') {\n  //   window.__mkMDXHack = window.__mkMDXHack || stuff;\n  //   return window.__mkMDXHack;\n  // }\n  return stuff;\n};\n","import React from 'react';\nimport { createUseStyles, useTheme } from 'react-jss';\nimport { useEpisode } from './Context';\n\n// eslint-disable-next-line\nconst useStyles = createUseStyles((theme) => ({}));\n\nconst History = () => {\n  const {\n    getStepInfo,\n    steps,\n  } = useEpisode();\n  const theme = useTheme();\n  const classes = useStyles({ theme });\n  return (\n    <div className={classes.root}>\n      <div>Episode history:</div>\n\n      {steps.map((stepId, stepIdx) => {\n        const step = getStepInfo(stepId);\n\n        return (step && (\n          // eslint-disable-next-line react/no-array-index-key\n          <div key={`${stepId}-${stepIdx}`}>{step.title}</div>\n        )) || null;\n      })}\n    </div>\n  );\n};\n\nexport default History;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport * as d3 from 'd3';\n\nimport { createUseStyles, useTheme } from 'react-jss';\nimport { withEpisode } from './Context';\n\n// eslint-disable-next-line\nconst useStyles = createUseStyles((theme) => ({\n  root: {\n    minWidth: 100,\n    minHeight: 100,\n    maxWidth: 400,\n    maxHeight: 400,\n  },\n}));\n\nclass GraphBase extends React.Component {\n  componentDidMount() {\n    this.renderChart();\n  }\n\n  componentDidUpdate({ steps: prevSteps, full: prevFull }) {\n    const { steps: newSteps, full: newFull } = this.props;\n    if (prevSteps.join('') !== newSteps.join('') || prevFull !== newFull) {\n      this.renderChart();\n    }\n  }\n\n  chart = (el = this.el) => {\n    const {\n      getStepInfo,\n      onItemMouseEnter,\n      onItemMouseOut,\n      onItemClick,\n    } = this.props;\n    const data = this.data();\n    const links = data.links.map((d) => Object.create(d));\n    const nodes = data.nodes.map((d) => Object.create(d));\n    const {\n      clientWidth: width,\n      clientHeight: height,\n    } = el;\n\n    const simulation = d3.forceSimulation(nodes)\n      .force('link', d3.forceLink(links).id((d) => d.id))\n      .force('charge', d3.forceManyBody())\n      .force('center', d3.forceCenter(width / 2, height / 2));\n\n    const svg = d3.create('svg')\n      .attr('viewBox', [0, 0, width, width]);\n\n    const link = svg.append('g')\n      .attr('stroke', '#999')\n      .attr('stroke-opacity', 0.6)\n      .selectAll('line')\n      .data(links)\n      .join('line')\n      .attr('stroke-width', (d) => Math.sqrt(d.value));\n\n    const node = svg.append('g')\n      .attr('stroke', '#fff')\n      .attr('stroke-width', 1.5)\n      .selectAll('circle')\n      .data(nodes)\n      .join('circle')\n      .attr('r', 5)\n      .attr('fill', this.color())\n      .on('mouseenter', (info, els) => {\n        const dataNode = data.nodes[info.index];\n        if (onItemMouseEnter) {\n          onItemMouseEnter(getStepInfo(dataNode.id), dataNode, info, els);\n        }\n      })\n      .on('mouseout', (info, els) => {\n        const dataNode = data.nodes[info.index];\n        if (onItemMouseOut) {\n          onItemMouseOut(getStepInfo(dataNode.id), dataNode, info, els);\n        }\n      })\n      .on('click', (info, els) => {\n        const dataNode = data.nodes[info.index];\n        if (onItemClick) {\n          onItemClick(getStepInfo(dataNode.id), dataNode, info, els);\n        }\n      })\n      .call(this.drag(simulation));\n\n    node.append('title')\n      .text((d) => d.id);\n\n    simulation.on('tick', () => {\n      link\n        .attr('x1', (d) => d.source.x)\n        .attr('y1', (d) => d.source.y)\n        .attr('x2', (d) => d.target.x)\n        .attr('y2', (d) => d.target.y);\n\n      node\n        .attr('cx', (d) => d.x)\n        .attr('cy', (d) => d.y);\n    });\n\n    return svg.node();\n  };\n\n  data = () => {\n    const {\n      steps,\n      episodeSteps,\n      getStepInfo,\n      full,\n    } = this.props;\n    const data = {};\n    const nodes = {};\n    const links = {};\n\n    const allSteps = full ? Object.keys(episodeSteps) : ['intro', ...steps];\n    allSteps.forEach((id, i) => {\n      const step = getStepInfo(id);\n      if (!step) return;\n\n      nodes[id] = { id, group: 2 };\n      if (!full && i) {\n        const prevId = allSteps[i - 1];\n        const linkKey = [prevId, id].join('->-');\n        links[linkKey] = { source: prevId, target: id, value: 10 };\n      }\n\n      if (\n        (!full && i >= steps.length)\n        || !step.choices\n        || !step.choices.length\n      ) return;\n\n      step.choices.forEach(({ target }) => {\n        nodes[target] = {\n          id: target,\n          group: allSteps.includes(target) ? 2 : 4,\n        };\n        const linkKey = [id, target].join('-x-');\n        links[linkKey] = links[linkKey] || { source: id, target, value: 1 };\n      });\n    });\n\n    // nodes.intro.group = 1;\n    if (nodes.end) nodes.end.group = 3;\n    data.nodes = Object.values(nodes);\n    data.links = Object.values(links);\n    return data;\n  };\n\n  // eslint-disable-next-line arrow-body-style\n  color = () => {\n    // const scale = d3.scaleOrdinal(d3.schemeCategory10);\n    // return (d) => scale(d.group);\n    return (d) => {\n      switch (d.group) {\n        case 1:\n          return 'lightgreen';\n        case 2:\n          return 'blue';\n        case 3:\n          return 'green';\n        default:\n          return 'lightgrey';\n      }\n    };\n  };\n\n  drag = (simulation) => {\n    /* eslint-disable no-param-reassign */\n    function dragstarted(d) {\n      if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(d) {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    }\n\n    function dragended(d) {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    }\n\n    return d3.drag()\n      .on('start', dragstarted)\n      .on('drag', dragged)\n      .on('end', dragended);\n    /* eslint-enable no-param-reassign */\n  }\n\n  refEl = (el) => {\n    // if (!this.el && el) el.appendChild(this.chart(el));\n    this.el = el;\n  };\n\n  renderChart = () => {\n    if (!this.el) return;\n    this.el.textContent = '';\n    this.el.appendChild(this.chart());\n  };\n\n  render() {\n    const { steps, className, classes } = this.props;\n    return (\n      <div\n        key={steps.join('')}\n        ref={this.refEl}\n        className={[className, (classes || {}).root].filter(Boolean).join(' ')}\n      />\n    );\n  }\n}\n\nGraphBase.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.objectOf(PropTypes.string),\n  full: PropTypes.bool,\n  onItemMouseEnter: PropTypes.func,\n  onItemMouseOut: PropTypes.func,\n  onItemClick: PropTypes.func,\n  getStepInfo: PropTypes.func.isRequired,\n  steps: PropTypes.arrayOf(PropTypes.string).isRequired,\n  episodeSteps: PropTypes.objectOf(PropTypes.shape({\n    title: PropTypes.string,\n    choices: PropTypes.arrayOf(PropTypes.shape({\n      target: PropTypes.string.isRequired,\n      title: PropTypes.string.isRequired,\n    })),\n  })).isRequired,\n};\n\nGraphBase.defaultProps = {\n  className: null,\n  classes: null,\n  full: false,\n  onItemMouseEnter: null,\n  onItemMouseOut: null,\n  onItemClick: null,\n};\n\nconst Graph = (props) => {\n  const theme = useTheme();\n  const classes = useStyles({ theme });\n  // eslint-disable-next-line react/jsx-props-no-spreading\n  return (<GraphBase {...props} classes={classes} />);\n};\n\nexport default Graph;\n\n// Graph.propTypes = {\n//   ...GraphBase.propTypes,\n// };\n// Graph.defaultProps = {\n//   ...GraphBase.defaultProps,\n// };\n\nexport const Connected = withEpisode(Graph);\n\nConnected.propTypes = {\n  onItemMouseEnter: PropTypes.func,\n  onItemMouseOut: PropTypes.func,\n  onItemClick: PropTypes.func,\n};\n\nConnected.defaultProps = {\n  onItemMouseEnter: null,\n  onItemMouseOut: null,\n  onItemClick: null,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { createUseStyles, useTheme } from 'react-jss';\nimport { useEpisode } from './Context';\nimport Button from '../Button';\n\n// eslint-disable-next-line\nconst useStyles = createUseStyles((theme) => ({\n  root: {},\n  hidden: {\n    opacity: 0.25,\n  },\n  button: {},\n}));\n\nexport const defaultComponents = { Button };\n\nconst Choices = ({\n  components: {\n    Button: ButtonComp = Button,\n  } = defaultComponents,\n  progress,\n  classes: baseClasses,\n}) => {\n  const episode = useEpisode();\n\n  const {\n    makeStep,\n    getStepInfo,\n  } = episode;\n\n  const step = getStepInfo();\n  const handleChoice = (choice) => () => {\n    makeStep(choice.target, choice);\n  };\n  const theme = useTheme();\n  const classes = {\n    ...useStyles({ theme }),\n    ...(baseClasses || {}),\n  };\n\n  if (!step || !Array.isArray(step.choices) || !step.choices.length) {\n    return null;\n  }\n\n  const hidden = !step.showChoices && progress < 1;\n\n  return (\n    <div\n      data-hidden={hidden}\n      className={[\n        classes.root,\n        hidden && classes.hidden,\n      ].filter(Boolean).join(' ')}\n    >\n      {step.choices.map((choice) => (\n        <ButtonComp\n          key={choice.target}\n          onClick={handleChoice(choice)}\n          className={classes.button}\n          hidden={hidden}\n        >\n          {choice.title}\n        </ButtonComp>\n      ))}\n    </div>\n  );\n};\n\nChoices.propTypes = {\n  classes: PropTypes.objectOf(PropTypes.string),\n  components: PropTypes.shape({\n    Button: PropTypes.elementType,\n  }),\n  progress: PropTypes.number,\n};\n\nChoices.defaultProps = {\n  classes: null,\n  components: defaultComponents,\n  progress: 0,\n};\n\nexport default Choices;\n\nexport const Connected = Choices;\n","/* eslint-disable no-console */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { MDXProvider } from '@mdx-js/react';\nimport { MDXRenderer } from 'gatsby-plugin-mdx';\n\nimport EpisodeContext, { defaultEpisode } from './Context';\nimport { useAppStuff } from '../../hooks/useApp';\n\nimport Button from '../Button/Button';\nimport History from './History';\nimport { Connected as Graph } from './Graph';\nimport Choices from './Choices';\nimport Slides, { Slide } from '../Slides';\n\nexport const defaultComponents = {\n  Button,\n  History,\n  Graph,\n  Choices,\n  Slides,\n  Slide,\n};\n\nexport const episodePath = (s, e, p) => `/episodes/s${s}e${e}/${p || ''}`;\n\nconst mdxObject = (episodeMdx) => episodeMdx.nodes.reduce((obj, {\n  parent: { name },\n  frontmatter: { title, choices, showChoices },\n  body,\n}) => ({\n  ...obj,\n  [name]: {\n    id: name,\n    title,\n    body,\n    showChoices,\n    choices: choices || [],\n  },\n}), {});\n\nconst Episode = (props) => {\n  const appStuff = useAppStuff();\n\n  const {\n    classes: baseClasses,\n    components,\n    pageContext: {\n      title,\n      assets,\n    },\n    data: {\n      episodeMdx,\n    },\n  } = props;\n\n  const {\n    Button: ButtonComp,\n    History: HistoryComp,\n    Graph: GraphComp,\n    Choices: ChoicesComp,\n    // Slides: SlidesComp,\n    // Slide: SlideComp,\n  } = { ...defaultComponents, ...(components || {}) };\n\n  const mdx = mdxObject(episodeMdx);\n\n  const {\n    steps = [],\n    stepProgress: progress,\n  } = appStuff;\n\n  const currentStepName = steps.length\n    ? steps[steps.length - 1]\n    : 'intro';\n  const getStepInfo = (wanted = currentStepName) => mdx[wanted || steps[steps.length - 1] || 'intro'];\n\n  const ctx = {\n    ...defaultEpisode,\n    title,\n    assets: (assets || []).reduce((obj, asset) => ({\n      ...obj,\n      [asset.base]: asset.publicURL,\n    }), {}),\n    episodeSteps: mdx,\n    getStepInfo,\n    ...appStuff,\n  };\n\n  const { body = null } = getStepInfo() || {};\n\n  const classes = { ...(baseClasses || {}) };\n\n  // eslint-disable-next-line no-unused-vars\n  const allComponents = {\n    ...(components || {}),\n  };\n\n  const readyComponents = { ...allComponents };\n  Object.keys(allComponents).forEach((key) => {\n    const Comp = allComponents[key];\n    Comp.displayName = `MK${Comp}`;\n    readyComponents[key] = (thisProps) => (\n      <Comp\n          // eslint-disable-next-line react/jsx-props-no-spreading\n        {...thisProps}\n        episodeContext={ctx}\n      />\n    );\n  });\n\n  const children = body\n    ? (\n      <MDXProvider>\n        <MDXRenderer>\n          {body}\n        </MDXRenderer>\n      </MDXProvider>\n    )\n    : 'Something is not quite right. Sorry';\n\n  return (\n    <EpisodeContext.Provider value={ctx}>\n      <section className={classes.root}>\n        <div className={classes.main}>\n          <main className={classes.mdxWrapper}>\n            {children}\n          </main>\n\n          <div\n            className={[\n              classes.choicesWrapper,\n              progress < 1 && classes.choicesWrapperHidden,\n            ].filter(Boolean).join(' ')}\n          >\n            <ChoicesComp\n              className={classes.choices}\n              components={{\n                Button: ButtonComp,\n              }}\n              progress={progress}\n            />\n          </div>\n\n          <div className={classes.episodeInfo}>\n            <HistoryComp className={classes.history} />\n\n            <GraphComp\n              className={classes.graph}\n              onItemMouseEnter={(...args) => { console.info('MouseEnter', ...args); }}\n              onItemMouseOut={(...args) => { console.info('MouseOut', ...args); }}\n              onItemClick={(...args) => { console.info('Click', ...args); }}\n            />\n          </div>\n        </div>\n      </section>\n    </EpisodeContext.Provider>\n  );\n};\n\nEpisode.propTypes = {\n  classes: PropTypes.objectOf(PropTypes.string),\n  pageContext: PropTypes.shape({\n    title: PropTypes.string,\n    body: PropTypes.string,\n    assets: PropTypes.arrayOf(PropTypes.object),\n  }).isRequired,\n  data: PropTypes.shape({\n    episodeMdx: PropTypes.shape({\n      nodes: PropTypes.arrayOf(PropTypes.shape({\n        body: PropTypes.string.isRequired,\n        parent: PropTypes.shape({\n          name: PropTypes.string.isRequired,\n        }).isRequired,\n        frontmatter: PropTypes.shape({\n          title: PropTypes.string,\n        }).isRequired,\n      })).isRequired,\n    }).isRequired,\n  }).isRequired,\n  components: PropTypes.objectOf(PropTypes.elementType),\n  /* eslint-disable */\n  path: PropTypes.string,\n  navigate: PropTypes.func,\n  location: PropTypes.object,\n  pageResources: PropTypes.object,\n  uri: PropTypes.string,\n  params: PropTypes.object,\n  pathContext: PropTypes.object,\n  transitionStatus: PropTypes.string,\n  current: PropTypes.shape({\n    state: PropTypes.object,\n    delay: PropTypes.number,\n    length: PropTypes.number,\n  }),\n  mount: PropTypes.bool,\n  entry: PropTypes.shape({\n    state: PropTypes.object,\n    delay: PropTypes.number,\n    length: PropTypes.number,\n  }),\n  exit: PropTypes.shape({\n    state: PropTypes.object,\n    delay: PropTypes.number,\n    length: PropTypes.number,\n  }),\n  /* eslint-enable */\n};\n\nEpisode.defaultProps = {\n  classes: null,\n  components: null,\n};\n\nexport default Episode;\n"],"sourceRoot":""}